## Mybatis_22


查询缓存 -- 二级缓存

这里是 `Mybatis` 内置的二级缓存(还可以有第三方的 例如: `escache`) 

* 二级缓存是和整个应用的生命周期一样的，就算`SqlSession`关闭，二级缓存也还是存在
* 注意，增、删、改也会刷新二级缓存
* 开启内置的二级缓存步骤：
    * 1）对实体进行序列化
    * 2）在映射文件中添加`<cache/>`标签
    
    * 二级缓存的关闭: 
        * 全局关闭 : 主配置文件中`Settings`配置
        * 局部关闭 : 在`select` 语句中 `useCache="false"`
        
        
***

* 1.增删改同样也会清空二级缓存 (可以设置不刷新)
* 2.对于二级缓存的清空，实质上是对所查找key对应的value置为null，
  而并非将<key，value>对，即Entry对象删除
* 3.从DB中进行select查询的条件是：
    * 1)缓存中根本就不存在这个key
    * 2)缓存中存在该key所对应的Entry对象，但其value为null